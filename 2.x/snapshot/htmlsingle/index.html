<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>RabbitMQ JMS Client</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>RabbitMQ JMS Client</h1>
<div class="details">
<span id="revnumber">version 2.12.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a></li>
<li><a href="#components">Components</a></li>
<li><a href="#jms-and-amqp-0-9-1">JMS and AMQP 0-9-1</a></li>
<li><a href="#limitations">Limitations</a></li>
<li><a href="#installing-and-configuring">Installing and Configuring</a>
<ul class="sectlevel2">
<li><a href="#enable_topic_selector">Enabling the Topic Selector Plug-in</a></li>
<li><a href="#installing-jms-client-library">Installing JMS Client library</a></li>
<li><a href="#enabling-the-jms-client-in-a-java-container">Enabling the JMS client in a Java container</a></li>
<li><a href="#defining-the-jms-connection-factory">Defining the JMS Connection Factory</a></li>
</ul>
</li>
<li><a href="#destination-interoperability">JMS and AMQP 0-9-1 Destination Interoperability</a>
<ul class="sectlevel2">
<li><a href="#sending-jms-messages-to-an-amqp-exchange">Sending JMS Messages to an AMQP Exchange</a></li>
<li><a href="#consuming-messages-from-an-amqp-queue">Consuming Messages From an AMQP Queue</a></li>
<li><a href="#jms-amqp-rmqdestination-constructor">JMS 'amqp' RMQDestination Constructor</a></li>
<li><a href="#jms-amqp-0-9-1-destination-definitions">JMS AMQP 0-9-1 Destination Definitions</a></li>
</ul>
</li>
<li><a href="#configuring-logging-for-the-jms-client">Configuring Logging for the JMS Client</a></li>
<li><a href="#publisher-confirms">Publisher Confirms</a></li>
<li><a href="#support-for-requestreply-a-k-a-rpc">Support for Request/Reply (a.k.a. RPC)</a>
<ul class="sectlevel2">
<li><a href="#with-jms-api">With JMS API</a></li>
<li><a href="#with-spring-jms">With Spring JMS</a></li>
</ul>
</li>
<li><a href="#implementation-details">Implementation Details</a>
<ul class="sectlevel2">
<li><a href="#jms-topic-support">JMS Topic Support</a></li>
<li><a href="#queuebrowser-support">QueueBrowser Support</a></li>
<li><a href="#group-and-individual-acknowledgement">Group and individual acknowledgement</a></li>
<li><a href="#arbitrary-message-support">Arbitrary Message support</a></li>
</ul>
</li>
<li><a href="#further-reading">Further Reading</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction"><a class="anchor" href="#introduction"></a>Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RabbitMQ is not a JMS provider but includes <a href="https://github.com/rabbitmq/rabbitmq-server/tree/main/deps/rabbitmq_jms_topic_exchange">a plugin</a>
needed to support the JMS Queue and Topic messaging models. JMS Client
for RabbitMQ implements the JMS specification on top of the
<a href="https://rabbitmq.com/api-guide.html">RabbitMQ Java client</a>, thus allowing new and
existing JMS applications to connect to RabbitMQ.</p>
</div>
<div class="paragraph">
<p>RabbitMQ JMS Client supports JMS 2.0 as of 2.7.0.
It requires Java 8 or more.</p>
</div>
<div class="paragraph">
<p>The plugin and the JMS client are meant to work and be used together.</p>
</div>
<div class="paragraph">
<p>See the <a href="https://rabbitmq.com/java-versions.html">RabbitMQ Java libraries support page</a> for the support timeline
of the RabbitMQ JMS Client library.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="components"><a class="anchor" href="#components"></a>Components</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To fully leverage JMS with RabbitMQ, you need the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <a href="https://github.com/rabbitmq/rabbitmq-jms-client">JMS client library</a> and its dependent libraries.</p>
</li>
<li>
<p><a href="https://github.com/rabbitmq/rabbitmq-server/tree/main/deps/rabbitmq_jms_topic_exchange">RabbitMQ JMS topic selector plugin</a> that is included
with RabbitMQ starting with version 3.6.3. To support message selectors for JMS
topics, the RabbitMQ Topic Selector plugin must be installed on the
RabbitMQ server. Message selectors allow a JMS application to filter
messages using an expression based on SQL syntax. Message selectors
for Queues are not currently supported.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="jms-and-amqp-0-9-1"><a class="anchor" href="#jms-and-amqp-0-9-1"></a>JMS and AMQP 0-9-1</h2>
<div class="sectionbody">
<div class="paragraph">
<p>JMS is the standard messaging API for the JEE platform. It is
available in commercial and open source implementations.  Each
implementation includes a JMS provider, a JMS client library, and
additional, implementation-specific components for administering the
messaging system. The JMS provider can be a standalone implementation
of the messaging service, or a bridge to a non-JMS messaging system.</p>
</div>
<div class="paragraph">
<p>The JMS client API is standardized, so JMS applications are portable
between vendors&#8217; implementations. However, the underlying messaging
implementation is unspecified, so there is no interoperability between
JMS implementations. Java applications that want to share messaging
must all use the same JMS implementation unless bridging technology
exists. Furthermore, non-Java applications cannot access JMS without a
vendor-specific JMS client library to enable interoperability.</p>
</div>
<div class="paragraph">
<p>AMQP 0-9-1 is a messaging protocol, rather than an API like JMS. Any
client that implements the protocol can access a broker that supports
AMQP 0-9-1. Protocol-level interoperability allows AMQP 0-9-1 clients
written in any programming language and running on any operating
system to participate in the messaging system with no need to bridge
incompatible vendor implementations.</p>
</div>
<div class="paragraph">
<p>Because JMS Client for RabbitMQ is implemented using the RabbitMQ Java
client, it is compliant with both the JMS API and the AMQP 0-9-1 protocol.</p>
</div>
<div class="paragraph">
<p>You can download the JMS 2.0 specification and API documentation from
the <a href="https://download.oracle.com/otndocs/jcp/jms-2_0_rev_a-mrel-eval-spec/index.html">Oracle Technology Network Web site</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="limitations"><a class="anchor" href="#limitations"></a>Limitations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some JMS 1.1 and 2.0 features are unsupported in the RabbitMQ JMS Client:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The JMS Client does not support server sessions.</p>
</li>
<li>
<p>XA transaction support interfaces are not implemented.</p>
</li>
<li>
<p>Topic selectors are supported with the RabbitMQ JMS topic selector
plugin. Queue selectors are not yet implemented.</p>
</li>
<li>
<p>SSL and socket options for RabbitMQ connections are supported, but
only using the (default) SSL connection protocols that the RabbitMQ client provides.</p>
</li>
<li>
<p>The JMS <code>NoLocal</code> subscription feature, which prevents delivery of
messages published from a subscriber&#8217;s own connection, is not supported
with RabbitMQ. You can call a method that includes the <code>NoLocal</code>
argument, but it is ignored.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rabbitmq/rabbitmq-jms-client/blob/main/jms-client-compliance.md">the JMS API compliance documentation</a> for a
detailed list of supported JMS APIs.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-and-configuring"><a class="anchor" href="#installing-and-configuring"></a>Installing and Configuring</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="enable_topic_selector"><a class="anchor" href="#enable_topic_selector"></a>Enabling the Topic Selector Plug-in</h3>
<div class="paragraph">
<p>The topic selector plugin is included with RabbitMQ. Like any RabbitMQ
plugin, you need to enable the plugin in order to use it.</p>
</div>
<div class="paragraph">
<p>Enable the plugin using the <code>rabbitmq-plugins</code> command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>rabbitmq-plugins enable rabbitmq_jms_topic_exchange</pre>
</div>
</div>
<div class="paragraph">
<p>You don&#8217;t need to restart the broker to activate the plugin.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You need to enable this plugin only if you plan to use topic selectors
in your JMS client applications</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="installing-jms-client-library"><a class="anchor" href="#installing-jms-client-library"></a>Installing JMS Client library</h3>
<div class="paragraph">
<p>Use your favorite build management tool to add the client dependencies to your project.</p>
</div>
<div class="sect3">
<h4 id="maven"><a class="anchor" href="#maven"></a>Maven</h4>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;dependencies&gt;</span>

  <span class="tag">&lt;dependency&gt;</span>
    <span class="tag">&lt;groupId&gt;</span>com.rabbitmq.jms<span class="tag">&lt;/groupId&gt;</span>
    <span class="tag">&lt;artifactId&gt;</span>rabbitmq-jms<span class="tag">&lt;/artifactId&gt;</span>
    <span class="tag">&lt;version&gt;</span>2.12.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
  <span class="tag">&lt;/dependency&gt;</span>

<span class="tag">&lt;/dependencies&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Snapshots require to declare the <a href="#snapshot-repository">appropriate repository</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="gradle"><a class="anchor" href="#gradle"></a>Gradle</h4>
<div class="listingblock">
<div class="title">build.gradle</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">dependencies {
  compile <span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms:rabbitmq-jms:2.12.0-SNAPSHOT</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Snapshots require to declare the <a href="#snapshot-repository">appropriate repository</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="snapshot-repository"><a class="anchor" href="#snapshot-repository"></a>Snapshots</h4>
<div class="paragraph">
<p>Releases are available from Maven Central, which does not require specific declaration.
Snapshots are available from a repository that must be declared in the dependency management configuration.</p>
</div>
<div class="paragraph">
<p>With Maven:</p>
</div>
<div class="listingblock">
<div class="title">Snapshot repository declaration for Maven</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;repositories&gt;</span>

  <span class="tag">&lt;repository&gt;</span>
    <span class="tag">&lt;id&gt;</span>ossrh<span class="tag">&lt;/id&gt;</span>
    <span class="tag">&lt;url&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="tag">&lt;/url&gt;</span>
    <span class="tag">&lt;snapshots&gt;</span><span class="tag">&lt;enabled&gt;</span>true<span class="tag">&lt;/enabled&gt;</span><span class="tag">&lt;/snapshots&gt;</span>
    <span class="tag">&lt;releases&gt;</span><span class="tag">&lt;enabled&gt;</span>false<span class="tag">&lt;/enabled&gt;</span><span class="tag">&lt;/releases&gt;</span>
  <span class="tag">&lt;/repository&gt;</span>

<span class="tag">&lt;/repositories&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>With Gradle:</p>
</div>
<div class="listingblock">
<div class="title">Snapshot repository declaration for Gradle:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">repositories {
  maven { url <span class="string"><span class="delimiter">'</span><span class="content">https://oss.sonatype.org/content/repositories/snapshots</span><span class="delimiter">'</span></span> }
  mavenCentral()
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enabling-the-jms-client-in-a-java-container"><a class="anchor" href="#enabling-the-jms-client-in-a-java-container"></a>Enabling the JMS client in a Java container</h3>
<div class="paragraph">
<p>To enable the JMS Client in a Java container (e.g. Java EE application
server, web container), you must install the JMS client JAR files and
its dependencies in the container and then define JMS resources in
the container&#8217;s naming system so that JMS clients can look them up.
The methods for accomplishing these tasks are container-specific, please
refer to the vendors&#8217; documentation.</p>
</div>
<div class="paragraph">
<p>For standalone applications, you need to add the JMS client JAR files
and its dependencies to the application classpath. The JMS resources
can be defined programmatically or through a dependency injection
framework like Spring.</p>
</div>
</div>
<div class="sect2">
<h3 id="defining-the-jms-connection-factory"><a class="anchor" href="#defining-the-jms-connection-factory"></a>Defining the JMS Connection Factory</h3>
<div class="paragraph">
<p>To define the JMS <code>ConnectionFactory</code> in JNDI, e.g. in Tomcat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Resource</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jms/ConnectionFactory</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.jms.ConnectionFactory</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">factory</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms.admin.RMQObjectFactory</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">username</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">password</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span>
     <span class="attribute-name">virtualHost</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">host</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>
            <span class="attribute-name">port</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5672</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To define the JMS <code>ConnectionFactory</code> in JNDI, e.g. in WildFly (as of JMS Client 1.7.0):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;object-factory</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java:global/jms/ConnectionFactory</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">module</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.jboss.genericjms.provider</span><span class="delimiter">&quot;</span></span>
                   <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms.admin.RMQObjectFactory</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
     <span class="tag">&lt;environment&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">className</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.jms.ConnectionFactory</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">virtualHost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">host</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5672</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
     <span class="tag">&lt;/environment&gt;</span>
<span class="tag">&lt;/object-factory&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the equivalent Spring bean example (Java configuration):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> ConnectionFactory jmsConnectionFactory() {
  RMQConnectionFactory connectionFactory = <span class="keyword">new</span> RMQConnectionFactory();
  connectionFactory.setUsername(<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span>);
  connectionFactory.setPassword(<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span>);
  connectionFactory.setVirtualHost(<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span>);
  connectionFactory.setHost(<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span>);
  connectionFactory.setPort(<span class="integer">5672</span>);
  <span class="keyword">return</span> connectionFactory;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the Spring XML configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jmsConnectionFactory</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms.admin.RMQConnectionFactory</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">username</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">password</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">guest</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">virtualHost</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">/</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">host</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">port</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">5672</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists all of the attributes/properties that are available.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute/Property</th>
<th class="tableblock halign-left valign-top">JNDI only?</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name in JNDI.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the JMS interface the object implements, usually <code>javax.jms.ConnectionFactory</code>. Other choices are <code>javax.jms.QueueConnectionFactory</code> and <code>javax.jms.TopicConnectionFactory</code>. You can also use the name of the (common) implementation class, <code>com.rabbitmq.jms.admin.RMQConnectionFactory</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>factory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMS Client for RabbitMQ <code>ObjectFactory</code> class, always <code>com.rabbitmq.jms.admin.RMQObjectFactory</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>username</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name to use to authenticate a connection with the RabbitMQ broker. The default is "guest".</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>password</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password to use to authenticate a connection with the RabbitMQ broker. The default is "guest".</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>virtualHost</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ <a href="https://www.rabbitmq.com/vhosts.html">virtual host</a> within which the application will operate. The default is "/".</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>host</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host on which RabbitMQ is running. The default is "localhost".</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ port used for connections. The default is "5672" unless this is a <a href="https://rabbitmq.com/ssl.html">TLS connection</a>, in which case the default is "5671".</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ssl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to use an SSL connection to RabbitMQ. The default is "false". See the <code>useSslProtocol</code> methods for more information.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <a href="https://rabbitmq.com/uri-spec.html">AMQP 0-9-1 URI</a> string used to establish a RabbitMQ connection. The value can encode the <code>host</code>, <code>port</code>, <code>username</code>, <code>password</code> and <code>virtualHost</code> in a single string. Both 'amqp' and 'amqps' schemes are accepted. Note: this property sets other properties and the set order is unspecified.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uris</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A list of <a href="https://rabbitmq.com/uri-spec.html">AMQP 0-9-1 URI</a> strings to establish a connection to one of the nodes of a RabbitMQ cluster. Each URI is processed in the same way as the <code>uri</code> property (<code>host</code>, <code>port</code>, <code>username</code>, etc). This has the same effect as specifying a <a href="https://rabbitmq.com/api-guide.html#endpoints-list">list of endpoints in the AMQP client</a>. The property is a <code>List&lt;String&gt;</code> in the <code>RMQConnectionFactory</code> and a <code>String</code> expecting a list of comma-separated URIs in the <code>RMQObjectFactory</code> (JNDI). Note: this property sets other properties and the set order is unspecified.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMessageTimeoutMs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long to wait for <code>MessageListener#onMessage()</code> to return, in milliseconds. Default is 2000 ms.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>preferProducerMessageProperty</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether <code>MessageProducer</code> properties (delivery mode, priority, TTL) take precedence over respective <code>Message</code> properties or not. Default is true (which is compliant to the JMS specification).</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>requeueOnMessageListenerException</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether requeuing messages on a <code>RuntimeException</code> in the <code>MessageListener</code> or not. Default is false.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>queueBrowserReadMax</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of messages to read on a queue browser. Default is 0 (no limit).</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>onMessageTimeoutMs</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time in milliseconds <code>MessageListener#onMessage(Message)</code> can take to process a message. Default is 2000 ms.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>channelsQos</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://www.rabbitmq.com/consumer-prefetch.html">QoS setting</a> for channels created by the connection factory. Default is -1 (no QoS).</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>terminationTimeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time in milliseconds a <code>Connection#close()</code> should wait for threads/tasks/listeners to complete. Default is 15,000 ms.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>declareReplyToDestination</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether <code>replyTo</code> destination for consumed messages should be declared. Default is true.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keepTextMessageType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set to <code>true</code>, the AMQP <code>JMSType</code> header will be set automatically to <code>"TextMessage"</code> for <code>TextMessage</code>s published to AMQP-backed <code>Destination</code>s. Default is false.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="destination-interoperability"><a class="anchor" href="#destination-interoperability"></a>JMS and AMQP 0-9-1 Destination Interoperability</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An interoperability feature allows you to define JMS 'amqp' destinations
that read and/or write to non-JMS RabbitMQ resources. <strong><em>Note this feature
does not support JMS topics</em></strong>.</p>
</div>
<div class="paragraph">
<p>A single 'amqp' destination can be defined for both sending and consuming.</p>
</div>
<div class="sect2">
<h3 id="sending-jms-messages-to-an-amqp-exchange"><a class="anchor" href="#sending-jms-messages-to-an-amqp-exchange"></a>Sending JMS Messages to an AMQP Exchange</h3>
<div class="paragraph">
<p>A JMS destination can be defined so that a JMS application can send
<code>Message</code>s to a predefined RabbitMQ 'destination' (exchange/routing key)
using the JMS API in the normal way. The messages are written
"in the clear," which means that any AMQP 0-9-1 client can read them without
having to understand the internal format of Java JMS messages.
<strong><em>Only <code>BytesMessage</code>s and <code>TextMessage</code>s can be written in this way</em></strong>.</p>
</div>
<div class="paragraph">
<p>When messages are sent to an 'amqp' Destination, JMS message properties
are mapped onto AMQP 0-9-1 headers and properties as appropriate.
For example, the <code>JMSPriority</code> property converts to the <code>priority</code> property
for the AMQP 0-9-1 message. (It is also set as a header with the name
"JMSPriority".) User-defined properties are set as named message header
values, provided they are <code>boolean</code>, numeric or <code>String</code> types.</p>
</div>
</div>
<div class="sect2">
<h3 id="consuming-messages-from-an-amqp-queue"><a class="anchor" href="#consuming-messages-from-an-amqp-queue"></a>Consuming Messages From an AMQP Queue</h3>
<div class="paragraph">
<p>Similarly, a JMS destination can be defined that reads messages from a
predefined RabbitMQ queue. A JMS application can then read these
messages using the JMS API. RabbitMQ JMS Client packs them up into
JMS Messages automatically. Messages read in this way are, by default,
<code>BytesMessage</code>s, but individual messages can be marked <code>TextMessage</code>
(by adding an AMQP message header called "JMSType" whose value is
"TextMessage"), which will interpret the byte-array payload as a UTF8
encoded String and return them as <code>TextMessage</code>s.</p>
</div>
<div class="paragraph">
<p>When reading from an 'amqp' Destination, values are mapped back to
JMS message properties, except that any explicit JMS property set as
a message header overrides the natural AMQP 0-9-1 header value, unless
this would misrepresent the message. For example,
<code>JMSDeliveryMode</code> cannot be overridden in this way.</p>
</div>
</div>
<div class="sect2">
<h3 id="jms-amqp-rmqdestination-constructor"><a class="anchor" href="#jms-amqp-rmqdestination-constructor"></a>JMS 'amqp' RMQDestination Constructor</h3>
<div class="paragraph">
<p>The <code>com.rabbitmq.jms.admin</code> package contains the <code>RMQDestination</code> class,
which implements <code>Destination</code> in the JMS interface. This is extended
with a new constructor:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> RMQDestination(<span class="predefined-type">String</span> destinationName, <span class="predefined-type">String</span> amqpExchangeName,
                    <span class="predefined-type">String</span> amqpRoutingKey, <span class="predefined-type">String</span> amqpQueueName);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This constructor creates a destination for JMS for RabbitMQ mapped
onto an AMQP 0-9-1 resource. The parameters are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>destinationName</code> - the name of the queue destination</p>
</li>
<li>
<p><code>amqpExchangeName</code> - the exchange name for the mapped resource</p>
</li>
<li>
<p><code>amqpRoutingKey</code> - the routing key for the mapped resource</p>
</li>
<li>
<p><code>amqpQueueName</code> - the queue name of the mapped resource (to listen
messages from)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applications that declare destinations in this way can use them directly,
or store them in a JNDI provider for JMS applications to retrieve.
Such destinations are non-temporary, queue destinations.</p>
</div>
</div>
<div class="sect2">
<h3 id="jms-amqp-0-9-1-destination-definitions"><a class="anchor" href="#jms-amqp-0-9-1-destination-definitions"></a>JMS AMQP 0-9-1 Destination Definitions</h3>
<div class="paragraph">
<p>The <code>RMQDestination</code> object has the following new instance fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>amqp</code>&#8201;&#8212;&#8201;<em>boolean</em>, indicates if this is an AMQP 0-9-1 destination
(if <strong>true</strong>); the default is <strong>false</strong>.</p>
</li>
<li>
<p><code>amqpExchangeName</code>&#8201;&#8212;&#8201;<em>String</em>, the RabbitMQ exchange name to use when
sending messages to this destination, if <code>amqp</code> is <strong>true</strong>; the default
is <strong>null</strong>.</p>
</li>
<li>
<p><code>amqpRoutingKey</code>&#8201;&#8212;&#8201;<em>String</em>, the AMQP 0-9-1 routing key to use when sending
messages to this destination, if <code>amqp</code> is <strong>true</strong>; the default is <strong>null</strong>.</p>
</li>
<li>
<p><code>amqpQueueName</code>&#8201;&#8212;&#8201;<em>String</em>, the RabbitMQ queue name to use when reading
messages from this destination, if <code>amqp</code> is <strong>true</strong>; the default is <strong>null</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are getters and setters for these fields, which means that a JNDI
 <code>&lt;Resource/&gt;</code> definition or an XML Spring bean definition can use them, for example
 JNDI with Tomcat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;Resource</span>  <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jms/Queue</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.jms.Queue</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">factory</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms.admin.RMQObjectFactory</span><span class="delimiter">&quot;</span></span>
<span class="attribute-name">destinationName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myQueue</span><span class="delimiter">&quot;</span></span>
           <span class="attribute-name">amqp</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">amqpQueueName</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rabbitQueueName</span><span class="delimiter">&quot;</span></span>
<span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the equivalent with WildFly (as of JMS Client 1.7.0):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bindings&gt;</span>
    <span class="tag">&lt;object-factory</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">java:global/jms/Queue</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">module</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">foo.bar</span><span class="delimiter">&quot;</span></span>
                    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms.admin.RMQObjectFactory</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;environment&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">className</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">javax.jms.Queue</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">destinationName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myQueue</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">amqp</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">amqpQueueName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rabbitQueueName</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
        <span class="tag">&lt;/environment&gt;</span>
    <span class="tag">&lt;/object-factory&gt;</span>
<span class="tag">&lt;/bindings&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is the equivalent Spring bean example (Java configuration):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> <span class="predefined-type">Destination</span> jmsDestination() {
    RMQDestination jmsDestination = <span class="keyword">new</span> RMQDestination();
    jmsDestination.setDestinationName(<span class="string"><span class="delimiter">&quot;</span><span class="content">myQueue</span><span class="delimiter">&quot;</span></span>);
    jmsDestination.setAmqp(<span class="predefined-constant">true</span>);
    jmsDestination.setAmqpQueueName(<span class="string"><span class="delimiter">&quot;</span><span class="content">rabbitQueueName</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> jmsDestination;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And here is the Spring XML configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jmsDestination</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.rabbitmq.jms.admin.RMQDestination</span><span class="delimiter">&quot;</span></span> <span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">destinationName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">myQueue</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">amqp</span><span class="delimiter">&quot;</span></span>            <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">amqpQueueName</span><span class="delimiter">&quot;</span></span>   <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">rabbitQueueName</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Following is a <em>complete</em> list of the attributes/properties that are
available:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute/Property Name</th>
<th class="tableblock halign-left valign-top">JNDI Only?</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name in JNDI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the JMS interface the object implements, usually <code>javax.jms.Queue</code>. Other choices are <code>javax.jms.Topic</code> and <code>javax.jms.Destination</code>. You can also use the name of the (common) implementation class, <code>com.rabbitmq.jms.admin.RMQDestination</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>factory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JMS Client for RabbitMQ <code>ObjectFactory</code> class, always <code>com.rabbitmq.jms.admin.RMQObjectFactory</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amqp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"<strong>true</strong>" means this is an 'amqp' destination. Default "<strong>false</strong>".</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amqpExchangeName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the RabbitMQ exchange to publish messages to when an 'amqp' destination. This exchange must exist when messages are published.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amqpRoutingKey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The routing key to use when publishing messages when an 'amqp' destination.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>amqpQueueName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the RabbitMQ queue to receive messages from when an 'amqp' destination. This queue must exist when messages are received.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>destinationName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the JMS destination.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>queueDeclareArguments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Arguments to use when declaring the AMQP queue. Use <code>key=value</code> pairs separated by commas for JNDI, e.g. <code>x-queue-type=quorum</code>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-logging-for-the-jms-client"><a class="anchor" href="#configuring-logging-for-the-jms-client"></a>Configuring Logging for the JMS Client</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The JMS Client logs messages using SLF4J (Simple Logging Façade for Java).
SLF4J delegates to a logging framework, such as <a href="https://logback.qos.ch/">Logback</a>.
If no other logging framework is
enabled, SLF4J defaults to a built-in, no-op, logger.
See the <a href="http://www.slf4j.org/docs.html">SLF4J</a> documentation for a
list of the logging frameworks SLF4J supports.</p>
</div>
<div class="paragraph">
<p>We highly recommend to use a dependency management tool like <a href="http://maven.apache.org/">Maven</a>
or <a href="https://gradle.org/">Gradle</a> to manage dependencies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="publisher-confirms"><a class="anchor" href="#publisher-confirms"></a>Publisher Confirms</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Publisher Confirms support is deprecated in favor of <a href="https://jakarta.ee/specifications/messaging/3.1/jakarta-messaging-spec-3.1.html#sending-messages-asynchronously-jms_spec-43">asynchronous sending</a> (JMS 2.0).
The same recommendation applies to the <code>CompletionListener</code>: it is not a good place to execute long-running tasks.
Those should be executed in a dedicated thread, using e.g. an <code>ExecutorService</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="https://rabbitmq.com/confirms.html#publisher-confirms">Publisher confirms</a> are a RabbitMQ extension to implement reliable
publishing. This feature builds on top of the AMQP protocol, but the JMS client
provides an API to use it. This allows to benefit from a reliability feature without
diverging too much from the JMS API.</p>
</div>
<div class="paragraph">
<p>Publisher confirms are deactivated by default. They can be activated by setting
a <code>ConfirmListener</code> on the <code>RMQConnectionFactory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">RMQConnectionFactory connectionFactory = <span class="keyword">new</span> RMQConnectionFactory();
connectionFactory.setConfirmListener(context -&gt; {
    context.getMessage(); <span class="comment">// the message that is confirmed/nack-ed</span>
    context.isAck(); <span class="comment">// whether the message is confirmed or nack-ed</span>
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the <code>ConfirmListener</code> is not a good place to execute long-running tasks.
Those should be executed in a dedicated thread, using e.g. an <code>ExecutorService</code>.</p>
</div>
<div class="paragraph">
<p>Typical operations in a <code>ConfirmListener</code> are logging or message re-publishing (in case
of nacks). The <a href="https://rabbitmq.com/tutorials/tutorial-seven-java.html">publish confirms tutorial</a> provides more guidance. It aims for the
AMQP Java client, but principles remain the same for the JMS client.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="support-for-requestreply-a-k-a-rpc"><a class="anchor" href="#support-for-requestreply-a-k-a-rpc"></a>Support for Request/Reply (a.k.a. RPC)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is possible to use JMS for synchronous request/reply use cases.
This pattern is commonly known as <em>Remote Procedure Call</em> or <em>RPC</em>.</p>
</div>
<div class="sect2">
<h3 id="with-jms-api"><a class="anchor" href="#with-jms-api"></a>With JMS API</h3>
<div class="paragraph">
<p>An RPC client can be implemented in pure JMS like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message request = ... <span class="comment">// create the request message</span>
<span class="comment">// set up reply-to queue and start listening on it</span>
Destination replyQueue = session.createTemporaryQueue();
message.setJMSReplyTo(replyQueue);
MessageConsumer responseConsumer = session.createConsumer(replyQueue);
<span class="predefined-type">BlockingQueue</span>&lt;Message&gt; queue = <span class="keyword">new</span> <span class="predefined-type">ArrayBlockingQueue</span>&lt;&gt;(<span class="integer">1</span>);
responseConsumer.setMessageListener(msg -&gt; queue.add(msg));
<span class="comment">// send request message</span>
MessageProducer producer = session.createProducer(<span class="string"><span class="delimiter">&quot;</span><span class="content">request.queue</span><span class="delimiter">&quot;</span></span>);
producer.send(request);
<span class="comment">// wait response for 5 seconds</span>
Message response = queue.poll(<span class="integer">5</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);
<span class="comment">// close the response consumer</span>
responseConsumer.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s also possible to create a single reply-to destination instead of
a temporary destination for each request. This is more efficient but requires
to properly correlate the response with the request, by using e.g.
a correlation ID header. RabbitMQ&#8217;s <a href="https://rabbitmq.com/direct-reply-to.html">direct reply-to</a>
is another alternative (see below).</p>
</div>
<div class="paragraph">
<p>Note this sample uses a <code>MessageListener</code> and a <code>BlockingQueue</code> to wait
for the response. This implies a network roundtrip to register an AMQP
consumer and another one to close the consumer.
<code>MessageConsumer#receive</code> could have been used as well, in this case the JMS
client internally polls the reply destination to get the response, which can result in several
network roundtrips if the response takes some time to come. The request
call will also incur a constant penalty equals to the polling interval (100 milliseconds
by default).</p>
</div>
<div class="paragraph">
<p>The server part looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// this is necessary when using temporary reply-to destinations</span>
connectionFactory.setDeclareReplyToDestination(<span class="predefined-constant">false</span>);
...
MessageProducer replyProducer = session.createProducer(<span class="predefined-constant">null</span>);
MessageConsumer consumer = session.createConsumer(<span class="string"><span class="delimiter">&quot;</span><span class="content">request.queue</span><span class="delimiter">&quot;</span></span>);
consumer.setMessageListener(message -&gt; {
    <span class="keyword">try</span> {
        <span class="predefined-type">Destination</span> replyQueue = message.getJMSReplyTo();
        <span class="keyword">if</span> (replyQueue != <span class="predefined-constant">null</span>) {
            <span class="comment">// create response and send it</span>
            Message response = ...
            replyProducer.send(replyQueue, response);
        }
    } <span class="keyword">catch</span> (JMSException e) {
        <span class="comment">// deal with exception</span>
    }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the <code>connectionFactory.setDeclareReplyToDestination(false)</code>
statement: it is necessary when using temporary reply-to destinations.
If this flag is not set to <code>false</code> on the RPC server side, the JMS
client will try to re-create the temporary reply-to destination, which will
interfere with the client-side declaration.</p>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rabbitmq/rabbitmq-jms-client/blob/main/src/test/java/com/rabbitmq/integration/tests/RpcIT.java">this test</a>
for a full RPC example.</p>
</div>
<div class="paragraph">
<p>The JMS client also supports <a href="https://rabbitmq.com/direct-reply-to.html">direct reply-to</a>, which is faster as it doesn&#8217;t imply
creating a temporary reply destination:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Message request = ...
<span class="comment">// use direct reply-to</span>
RMQDestination replyQueue = <span class="keyword">new</span> RMQDestination(
    <span class="string"><span class="delimiter">&quot;</span><span class="content">amq.rabbitmq.reply-to</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">amq.rabbitmq.reply-to</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">amq.rabbitmq.reply-to</span><span class="delimiter">&quot;</span></span>
);
replyQueue.setDeclared(<span class="predefined-constant">true</span>); <span class="comment">// don't need to create this destination</span>
message.setJMSReplyTo(replyQueue);
MessageConsumer responseConsumer = session.createConsumer(replyQueue);
<span class="predefined-type">BlockingQueue</span>&lt;Message&gt; queue = <span class="keyword">new</span> <span class="predefined-type">ArrayBlockingQueue</span>&lt;&gt;(<span class="integer">1</span>);
responseConsumer.setMessageListener(msg -&gt; queue.add(msg));
<span class="comment">// send request message</span>
MessageProducer producer = session.createProducer(<span class="string"><span class="delimiter">&quot;</span><span class="content">request.queue</span><span class="delimiter">&quot;</span></span>);
producer.send(request);
<span class="comment">// wait response for 5 seconds</span>
Message response = queue.poll(<span class="integer">5</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);
<span class="comment">// close the response consumer</span>
responseConsumer.close();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using direct reply-to for JMS-based RPC has the following implications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it uses automatically auto-acknowledgment</p>
</li>
<li>
<p>the response must be a <code>BytesMessage</code> or a <code>TextMessage</code> as direct reply-to
is considered an <a href="#destination-interoperability">AMQP destination</a>. Use <code>response.setStringProperty("JMSType", "TextMessage")</code>
on the response message in the RPC server if you want to receive a <code>TextMessage</code>
on the client side.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rabbitmq/rabbitmq-jms-client/blob/main/src/test/java/com/rabbitmq/integration/tests/RpcWithAmqpDirectReplyIT.java">this test</a> for a full RPC example using direct reply-to.</p>
</div>
</div>
<div class="sect2">
<h3 id="with-spring-jms"><a class="anchor" href="#with-spring-jms"></a>With Spring JMS</h3>
<div class="paragraph">
<p><a href="https://docs.spring.io/spring-framework/docs/5.3.23/reference/html/integration.html#jms">Spring JMS</a>
is a popular way to work with JMS as it avoids most of JMS boilerplate.</p>
</div>
<div class="paragraph">
<p>The following sample shows how a client can perform RPC with the
<code>JmsTemplate</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// NB: do not create a new JmsTemplate for each request</span>
JmsTemplate tpl = <span class="keyword">new</span> JmsTemplate(connectionFactory);
tpl.setReceiveTimeout(<span class="integer">5000</span>);
Message response = tpl.sendAndReceive(
    <span class="string"><span class="delimiter">&quot;</span><span class="content">request.queue</span><span class="delimiter">&quot;</span></span>,
    session -&gt; ... <span class="comment">// create request message in MessageCreator</span>
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is no different from any other JMS client.</p>
</div>
<div class="paragraph">
<p>The <code>JmsTemplate</code> uses a temporary reply-to destination,
so the call to <code>connectionFactory.setDeclareReplyToDestination(false)</code>
on the RPC server side is necessary, just like with regular JMS.</p>
</div>
<div class="paragraph">
<p>RPC with direct reply-to
must be implemented with a <code>SessionCallback</code>, as the reply destination
must be explicitly declared:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// NB: do not create a new JmsTemplate for each request</span>
JmsTemplate tpl = <span class="keyword">new</span> JmsTemplate(connectionFactory);
Message response = tpl.execute(session -&gt; {
    Message request = ... <span class="comment">// create request message</span>
    <span class="comment">// setup direct reply-to as reply-to destination</span>
    RMQDestination replyQueue = <span class="keyword">new</span> RMQDestination(
        <span class="string"><span class="delimiter">&quot;</span><span class="content">amq.rabbitmq.reply-to</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">amq.rabbitmq.reply-to</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">amq.rabbitmq.reply-to</span><span class="delimiter">&quot;</span></span>
    );
    replyQueue.setDeclared(<span class="predefined-constant">true</span>); <span class="comment">// no need to create this destination</span>
    message.setJMSReplyTo(replyQueue);
    MessageConsumer responseConsumer = session.createConsumer(replyQueue);
    <span class="predefined-type">BlockingQueue</span>&lt;Message&gt; queue = <span class="keyword">new</span> <span class="predefined-type">ArrayBlockingQueue</span>&lt;&gt;(<span class="integer">1</span>);
    responseConsumer.setMessageListener(msg -&gt; queue.add(msg));
    <span class="comment">// send request message</span>
    MessageProducer producer = session.createProducer(session.createQueue(<span class="string"><span class="delimiter">&quot;</span><span class="content">request.queue</span><span class="delimiter">&quot;</span></span>));
    producer.send(message);
    <span class="keyword">try</span> {
        <span class="comment">// wait response for 5 seconds</span>
        Message response = queue.poll(<span class="integer">5</span>, <span class="predefined-type">TimeUnit</span>.SECONDS);
        <span class="comment">// close the response consumer</span>
        responseConsumer.close();
        <span class="keyword">return</span> response;
    } <span class="keyword">catch</span> (<span class="exception">InterruptedException</span> e) {
        <span class="comment">// deal with exception</span>
    }
});</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/rabbitmq/rabbitmq-jms-client/blob/main/src/test/spring/com/rabbitmq/integration/tests/RpcSpringJmsIT.java">this test</a>
for a full example of RPC with Spring JMS, including using a <code>@JmsListener</code> bean
for the server part.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="implementation-details"><a class="anchor" href="#implementation-details"></a>Implementation Details</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides additional implementation details for specific
JMS API classes in the JMS Client.</p>
</div>
<div class="paragraph">
<p>Deviations from the specification are implemented to support common
acknowledgement behaviours.</p>
</div>
<div class="sect2">
<h3 id="jms-topic-support"><a class="anchor" href="#jms-topic-support"></a>JMS Topic Support</h3>
<div class="paragraph">
<p>JMS topics are implemented using an AMQP <a href="https://rabbitmq.com/tutorials/amqp-concepts.html#exchange-topic">topic exchange</a>
and a dedicated AMQP queue for each JMS topic subscriber. The AMQP
topic exchange is <code>jms.temp.topic</code> or <code>jms.durable.topic</code>, depending
on whether the JMS topic is temporary or not, respectively. Let&#8217;s
take an example with a subscription to a durable <code>my.jms.topic</code> JMS topic:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a dedicated AMQP queue is created for this subscriber, its name
will follow the pattern <code>jms-cons-{UUID}</code>.</p>
</li>
<li>
<p>the <code>jms-cons-{UUID}</code> AMQP queue is bound to the <code>jms.durable.topic</code>
exchange with the <code>my.jms.topic</code> binding key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If another subscriber subscribes to <code>my.jms.topic</code>, it will have
its own AMQP queue and both subscribers will receive messages published
to the <code>jms.durable.topic</code> exchange with the <code>my.jms.topic</code> routing key.</p>
</div>
<div class="paragraph">
<p>The example above assumes no topic selector is used when declaring the
subscribers. If a topic selector is in use, a <code>x-jms-topic</code>-typed exchange
will sit between the <code>jms.durable.topic</code> topic exchange and the
subscriber queue. So the topology is the following when subscribing to
a durable <code>my.jms.topic</code> JMS topic with a selector:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a dedicated AMQP queue is created for this subscriber, its name
will follow the pattern <code>jms-cons-{UUID}</code>.</p>
</li>
<li>
<p>a <code>x-jms-topic</code>-typed exchange is bound to the subscriber AMQP queue with
the <code>my.jms.topic</code> binding key and some arguments related to the selector
expressions. Note this exchange is scoped to the JMS session and not only
to the subscriber.</p>
</li>
<li>
<p>the <code>x-jms-topic</code>-typed exchange is bound to the <code>jms.durable.topic</code>
exchange with the <code>my.jms.topic</code> binding key.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Exchanges can be bound together thanks to a <a href="https://rabbitmq.com/e2e.html">RabbitMQ extension</a>.
Note the <a href="#enable_topic_selector">Topic Selector Plugin</a> must be enabled for topic selectors
to work.</p>
</div>
</div>
<div class="sect2">
<h3 id="queuebrowser-support"><a class="anchor" href="#queuebrowser-support"></a>QueueBrowser Support</h3>
<div class="sect3">
<h4 id="overview-of-queue-browsers"><a class="anchor" href="#overview-of-queue-browsers"></a>Overview of queue browsers</h4>
<div class="paragraph">
<p>The JMS API includes objects and methods to browse an existing queue
destination, reading its messages <em>without</em> removing them from the
queue. Topic destinations cannot be browsed in this manner.</p>
</div>
<div class="paragraph">
<p>A <code>QueueBrowser</code> can be created from a (queue) <code>Destination</code>,
with or without a selector expression. The browser has a <code>getEnumeration()</code>
method, which returns a Java <code>Enumeration</code> of <code>Message</code>s copied from
the queue.</p>
</div>
<div class="paragraph">
<p>If no selector is supplied, then all messages in the queue appear
in the <code>Enumeration</code>. If a selector is supplied, then only those
messages that satisfy the selector appear.</p>
</div>
</div>
<div class="sect3">
<h4 id="implementation"><a class="anchor" href="#implementation"></a>Implementation</h4>
<div class="paragraph">
<p>The destination queue is read when the <code>getEnumeration()</code> method is
called. A <em>snapshot</em> is taken of the messages in the queue; and the
selector expression, if one is supplied, is used at this time to discard
messages that do not match.</p>
</div>
<div class="paragraph">
<p>The message copies may now be read using the <code>Enumeration</code> interface
(<code>nextElement()</code> and <code>hasMoreElements()</code>).</p>
</div>
<div class="paragraph">
<p>The selector expression and the destination queue of the <code>QueueBrowser</code>
may not be adjusted after the <code>QueueBrowser</code> is created.</p>
</div>
<div class="paragraph">
<p>An <code>Enumeration</code> cannot be "reset", but the <code>getEnumeration()</code> method
may be re-issued, taking a <em>new</em> snapshot from the queue each time.</p>
</div>
<div class="paragraph">
<p>The contents of an <code>Enumeration</code> survive session and/or connection
close, but a <code>QueueBrowser</code> may not be used after the session that
created it has closed. <code>QueueBrowser.close()</code> has no effect.</p>
</div>
<div class="sect4">
<h5 id="which-messages-are-included"><a class="anchor" href="#which-messages-are-included"></a>Which messages are included</h5>
<div class="paragraph">
<p>Messages that arrive, expire, are re-queued, or are removed after
the <code>getEnumeration()</code> call have no effect on the contents of the
<code>Enumeration</code> it produced. If the messages in the queue change
<em>while the</em> <code>Enumeration</code> <em>is being built</em>, they may or may not be
included. In particular, if messages from the queue are simultaneously
read by another client (or session), they may or may not appear in
the <code>Enumeration</code>.</p>
</div>
<div class="paragraph">
<p>Message copies do not "expire" from an <code>Enumeration</code>.</p>
</div>
</div>
<div class="sect4">
<h5 id="order-of-messages"><a class="anchor" href="#order-of-messages"></a>Order of messages</h5>
<div class="paragraph">
<p>If other client sessions read from a queue that is being browsed,
then it is possible that some messages may subsequently be received out
of order.</p>
</div>
<div class="paragraph">
<p>Message order will not be disturbed if no other client sessions read
the queue at the same time.</p>
</div>
</div>
<div class="sect4">
<h5 id="memory-usage"><a class="anchor" href="#memory-usage"></a>Memory usage</h5>
<div class="paragraph">
<p>When a message is read from the <code>Enumeration</code> (with <code>nextElement()</code>),
then no reference to it is retained in the Java Client. This means the
storage it occupies in the client is eligible for release
(by garbage collection) if no other references are retained.
Retaining an <code>Enumeration</code> will retain the storage for all message
copies that remain in it.</p>
</div>
<div class="paragraph">
<p>If the queue has many messages&#8201;&#8212;&#8201;or the messages it contains are very
large&#8201;&#8212;&#8201;then a <code>getEnumeration()</code> method call may consume a large
amount of memory in a very short time. This remains true even if only
a few messages are selected. There is currently limited protection
against <code>OutOfMemoryError</code> conditions that may arise because of this.
See the next section.</p>
</div>
</div>
<div class="sect4">
<h5 id="setting-a-maximum-number-of-messages-to-browse"><a class="anchor" href="#setting-a-maximum-number-of-messages-to-browse"></a>Setting a maximum number of messages to browse</h5>
<div class="paragraph">
<p>Each connection is created with a limit on the number of messages that
are examined by a <code>QueueBrowser</code>. The limit is set on the
<code>RMQConnectionFactory</code> by <code>RMQConnectionFactory.setQueueBrowserReadMax(int)</code>
and is passed to each <code>Connection</code> subsequently created
by <code>ConnectionFactory.createConnection()</code>.</p>
</div>
<div class="paragraph">
<p>The limit is an integer that, if positive, stops the queue browser from
reading more than this number of messages when building an enumeration.
If it is zero or negative, it is interpreted as imposing no limit on
the browser, and all of the messages on the queue are scanned.</p>
</div>
<div class="paragraph">
<p>The default limit for a factory is determined by the
<code>rabbit.jms.queueBrowserReadMax</code> system property, if set, and the value
is specified as <code>0</code> if this property is not set or is not an integer.</p>
</div>
<div class="paragraph">
<p>If a <code>RMQConnectionFactory</code> value is obtained from a JNDI provider,
then the limit set when the factory object was created is preserved.</p>
</div>
</div>
<div class="sect4">
<h5 id="release-support"><a class="anchor" href="#release-support"></a>Release Support</h5>
<div class="paragraph">
<p>Support for <code>QueueBrowser</code>s is introduced in the JMS Client 1.2.0.
Prior to that release, calling <code>Session.createBrowser(Queue queue[, String selector])</code>
resulted in an <code>UnsupportedOperationException</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="group-and-individual-acknowledgement"><a class="anchor" href="#group-and-individual-acknowledgement"></a>Group and individual acknowledgement</h3>
<div class="paragraph">
<p>Prior to version 1.2.0 of the JMS client, in client acknowledgement mode
(<code>Session.CLIENT_ACKNOWLEDGE</code>), acknowledging any message from an open
session would acknowledge <em>every</em> unacknowledged message of that session,
whether they were received before or after the message being acknowledged.</p>
</div>
<div class="paragraph">
<p>Currently, the behaviour of <code>Session.CLIENT_ACKNOWLEDGE</code> mode is
modified so that, when calling <code>msg.acknowledge()</code>, only the message
<code>msg</code> <em>and all</em> previously received <em>unacknowledged messages on that
session</em> are acknowledged. Messages received <em>after</em> <code>msg</code> was received
are not affected. This is a form of <em>group acknowledgement</em>,
which differs slightly from the JMS specification but is likely to
be more useful, and is compatible with the vast majority of uses of
the existing acknowledge function.</p>
</div>
<div class="paragraph">
<p>For even finer control, a new acknowledgement mode may be set when
creating a session, called <code>RMQSession.CLIENT_INDIVIDUAL_ACKNOWLEDGE</code>.</p>
</div>
<div class="paragraph">
<p>A session created with this acknowledgement mode will mean that messages
received on that session will be acknowledged individually. That is,
the call <code>msg.acknowledge()</code> will acknowledge only the message <code>msg</code>
and not affect any other messages of that session.</p>
</div>
<div class="paragraph">
<p>The acknowledgement mode <code>RMQSession.CLIENT_INDIVIDUAL_ACKNOWLEDGE</code>
is equivalent to <code>Session.CLIENT_ACKNOWLEDGE</code> in all other respects.
In particular the <code>getAcknowledgeMode()</code> method returns
<code>Session.CLIENT_ACKNOWLEDGE</code> even if
<code>RMQSession.CLIENT_INDIVIDUAL_ACKNOWLEDGE</code> has been set.</p>
</div>
</div>
<div class="sect2">
<h3 id="arbitrary-message-support"><a class="anchor" href="#arbitrary-message-support"></a>Arbitrary Message support</h3>
<div class="paragraph">
<p>Any instance of a class that implements the <code>javax.jms.Message</code>
interface can be <em>sent</em> by a JMS message producer.</p>
</div>
<div class="paragraph">
<p>All properties of the message required by <code>send()</code> are correctly
interpreted except that the <code>JMSReplyTo</code> header and objects
(as property values or the body of an <code>ObjectMessage</code>) that
cannot be deserialized are ignored.</p>
</div>
<div class="paragraph">
<p>The implementation extracts the properties and body from the <code>Message</code>
instance using interface methods and recreates it as a message of
the right (<code>RMQMessage</code>) type (<code>BytesMessage</code>, <code>MapMessage</code>, <code>ObjectMessage</code>,
<code>TextMessage</code>, or <code>StreamMessage</code>) before sending it. This means
that there is some performance loss due to the copying; but in the
normal case, when the message is an instance of
<code>com.rabbitmq.jms.client.RMQMessage</code>, no copying is done.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="further-reading"><a class="anchor" href="#further-reading"></a>Further Reading</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To gain better understanding of AMQP 0-9-1 concepts and interoperability of
the RabbitMQ JMS client with AMQP 0-9-1 clients, you may wish to read an
<a href="https://rabbitmq.com/tutorials/amqp-concepts.html">Introduction to RabbitMQ Concepts</a>
and browse our
<a href="https://rabbitmq.com/amqp-0-9-1-quickref.html">AMQP 0-9-1 Quick Reference Guide</a>.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.12.0-SNAPSHOT<br>
Last updated 2025-03-03 17:00:38 UTC
</div>
</div>
</body>
</html>